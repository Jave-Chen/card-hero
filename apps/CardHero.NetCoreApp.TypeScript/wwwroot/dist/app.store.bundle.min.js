(window["wj"] = window["wj"] || []).push([[744],{

/***/ 8:
/*!**********************************************************!*\
  !*** ./ClientApp/components/store/StoreItemBuyModal.tsx ***!
  \**********************************************************/
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__, __webpack_require__.n, __webpack_require__.d */
/***/ ((__unusedmodule, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ StoreItemBuyModal
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 294);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_bootstrap__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-bootstrap */ 588);


class StoreItemBuyModal extends react__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(props) {
        super(props);
    }
    onHide() {
        if (this.props.onHide) {
            this.props.onHide();
        }
    }
    onPurchase() {
        if (this.props.onPurchase) {
            this.props.onPurchase(this.props.storeItem);
        }
    }
    render() {
        if (!this.props.storeItem)
            return null;
        return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__.Modal, Object.assign({}, this.props, { centered: true }),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__.Modal.Header, { closeButton: true },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__.Modal.Title, null, "Purchase item")),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__.Modal.Body, null,
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "row" },
                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "container" },
                        "Buy ",
                        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("strong", null, this.props.storeItem.name),
                        "?"))),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react_bootstrap__WEBPACK_IMPORTED_MODULE_1__.Modal.Footer, null,
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", { type: "button", className: "btn btn-secondary", onClick: () => this.onHide() }, "Cancel"),
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", { type: "button", className: "btn btn-success", onClick: () => this.onPurchase() }, "Purchase"))));
    }
}


/***/ }),

/***/ 635:
/*!**********************************************!*\
  !*** ./ClientApp/components/store/index.tsx ***!
  \**********************************************/
/*! exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__, __webpack_require__.n */
/***/ ((__unusedmodule, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 294);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ 935);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _shared_appBootstrap__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/appBootstrap */ 205);
/* harmony import */ var _StoreApp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./StoreApp */ 762);




react_dom__WEBPACK_IMPORTED_MODULE_1___default().render(react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_StoreApp__WEBPACK_IMPORTED_MODULE_3__.default, null), _shared_appBootstrap__WEBPACK_IMPORTED_MODULE_2__.default.rootElement);


/***/ }),

/***/ 762:
/*!*************************************************!*\
  !*** ./ClientApp/components/store/StoreApp.tsx ***!
  \*************************************************/
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__, __webpack_require__.n, __webpack_require__.d */
/***/ ((__unusedmodule, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ StoreApp
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 294);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _shared_Layout__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/Layout */ 872);
/* harmony import */ var _Store__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Store */ 884);



class StoreApp extends react__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(props) {
        super(props);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_shared_Layout__WEBPACK_IMPORTED_MODULE_1__.default, null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_Store__WEBPACK_IMPORTED_MODULE_2__.default, null)));
    }
}


/***/ }),

/***/ 838:
/*!*********************************************************!*\
  !*** ./ClientApp/components/store/StoreItemDetails.tsx ***!
  \*********************************************************/
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__, __webpack_require__.n, __webpack_require__.d */
/***/ ((__unusedmodule, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ StoreItemDetails
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 294);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _shared_CoinFormat__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../shared/CoinFormat */ 196);
/* harmony import */ var _shared_DateFormat__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../shared/DateFormat */ 439);



function StoreItemDetails(props) {
    const si = props.storeItem;
    const onSelectItem = () => {
        if (props.onSelectItem) {
            props.onSelectItem(si);
        }
    };
    return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "card" },
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("h4", { className: "card-header" },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null, si.name),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", { className: "pull-right badge-pill badge-secondary" }, si.itemCount)),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "card-body" },
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("p", null, si.description)),
        react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "card-footer" },
            si.expiry &&
                (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,
                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement("span", null, "Expires "),
                    react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_shared_DateFormat__WEBPACK_IMPORTED_MODULE_2__.default, { date: si.expiry }))),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("button", { type: "button", className: "btn btn-primary pull-right", onClick: onSelectItem },
                "Buy for ",
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_shared_CoinFormat__WEBPACK_IMPORTED_MODULE_1__.default, { coins: si.cost, title: si.cost.toString(), stripEmpty: true })))));
}


/***/ }),

/***/ 884:
/*!**********************************************!*\
  !*** ./ClientApp/components/store/Store.tsx ***!
  \**********************************************/
/*! export default [provided] [no usage info] [missing usage info prevents renaming] */
/*! other exports [not provided] [no usage info] */
/*! runtime requirements: __webpack_require__.r, __webpack_exports__, __webpack_require__, __webpack_require__.n, __webpack_require__.d */
/***/ ((__unusedmodule, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => /* binding */ Store
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ 294);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../contexts/AccountContext */ 224);
/* harmony import */ var _services_AccountService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../services/AccountService */ 254);
/* harmony import */ var _services_StoreService__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../services/StoreService */ 241);
/* harmony import */ var _StoreItemBuyModal__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./StoreItemBuyModal */ 8);
/* harmony import */ var _StoreItemDetails__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StoreItemDetails */ 838);






class Store extends react__WEBPACK_IMPORTED_MODULE_0__.Component {
    constructor(props) {
        super(props);
        this.state = {
            items: [],
            modalShown: false
        };
    }
    async componentDidMount() {
        const items = await _services_StoreService__WEBPACK_IMPORTED_MODULE_3__.default.getStoreItems();
        this.setState({
            items: items
        });
    }
    onModalHide() {
        this.setState({
            modalShown: false
        });
    }
    onSelectItem(item) {
        if (true) {
            console.log(item);
        }
        this.setState({
            selectedItem: item,
            modalShown: true
        });
    }
    async onPurchase(item) {
        const items = await _services_StoreService__WEBPACK_IMPORTED_MODULE_3__.default.buyCardBundle(item.id);
        if (true) {
            console.log(items);
        }
        this.setState({
            modalShown: false
        });
        const user = await _services_AccountService__WEBPACK_IMPORTED_MODULE_2__.default.getAccount();
        if (user) {
            this.context.setUser(user);
        }
        alert('Purchased bundle ' + item.name);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_0___default().createElement(react__WEBPACK_IMPORTED_MODULE_0__.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { className: "row" }, this.state.items.map(x => react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", { key: x.id, className: "col-lg-4" },
                react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_StoreItemDetails__WEBPACK_IMPORTED_MODULE_5__.default, { storeItem: x, onSelectItem: (item) => this.onSelectItem(item) })))),
            react__WEBPACK_IMPORTED_MODULE_0___default().createElement(_StoreItemBuyModal__WEBPACK_IMPORTED_MODULE_4__.default, { show: this.state.modalShown, onHide: () => this.onModalHide(), onPurchase: (item) => this.onPurchase(item), storeItem: this.state.selectedItem })));
    }
}
Store.contextType = _contexts_AccountContext__WEBPACK_IMPORTED_MODULE_1__.AccountContext;


/***/ })

},[[635,712,736]]]);